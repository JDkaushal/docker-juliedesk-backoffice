window.trackEvent = function(event, params, callback) {
    $.ajax({
        type: 'POST',
        url: 'https://jd-backoffice-analytics.herokuapp.com/api/v1/track',
        crossDomain: true,
        data: {name: event, date: (new Date()).toISOString(), properties: params, distinct_id: params.distinct_id},
        beforeSend: function(xhr){xhr.setRequestHeader('Authorization', "<%= ENV['JD_BACKOFFICE_API_KEY'] %>");},
        dataType: 'json',
        success: function(responseData, textStatus, jqXHR) {
            callback();
        },
        error: function (responseData, textStatus, errorThrown) {
            callback();
        }
    });
};

window.trackPing = function() {
    var date = new Date();
    $.get("https://jd-pinguin.herokuapp.com/").success(function(data) {
        var duration = new Date() - date;
        window.trackEvent("ping", {
            duration: duration,
            request_ip: JSON.parse(data).request_ip
        });
    });
};

window.trackFormSubmit = function(selector, event, params) {
    //TODO: Implement
};