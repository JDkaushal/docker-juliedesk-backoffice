<script>
    window.drawCalendarCallback = function(){
        window.activateCalendarWithParams({
            mode: "select_events",
            date_times: [],
            email: window.threadAccount.email,
            duration: window.threadComputedData.duration
        });
        // We don't want to directly show the calendar when forwarding to a client
        //$(".calendar-container").addClass("minimized");
    };

    window.afterReplyBoxInitCallback = function(){
        var messageBuilder = $('#reply-area').scope();

        var params = {
            action: "send_confirmation",
            origin: window.classification,
            locale: window.threadComputedData.locale
        };

        if(window.classification == 'update_event') {
            params.locationUpdated = window.locationHasBeenChanged;
            params.usingRestaurantBooking =  $('#restaurant-booking-manager').scope().getUsingRestaurantBooking();
            params.location = window.threadComputedData.location;
        }

        window.setReplyMessage(messageBuilder.generateReply(params), "all");
    };

</script>