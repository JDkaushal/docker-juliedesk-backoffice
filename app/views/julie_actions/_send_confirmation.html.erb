<script>
    // Do not open calendars for the following classifications
    window.do_not_open_calendar_classifications = ['give_info', 'update_event'];

    window.drawCalendarCallback = function(){
      window.activateCalendarWithParams({
        mode: "select_events",
        date_times: [],
        email: window.threadAccount.email,
        duration: window.threadComputedData.duration
      });


      if(window.do_not_open_calendar_classifications.indexOf(window.classification) != -1)
        $(".calendar-container").addClass("minimized");
    };

    window.afterReplyBoxInitCallback = function(){
        var messageBuilder = $('#reply-area').scope();

        var params = {
            action: "send_confirmation",
            origin: window.classification,
            locale: window.threadComputedData.locale
        };

        if(window.classification == 'update_event') {
            params.locationUpdated = window.locationHasBeenChanged;
            params.usingRestaurantBooking =  $('#restaurant-booking-manager').scope().getUsingRestaurantBooking();
            params.location = window.threadComputedData.location;
        }

        window.setReplyMessage(messageBuilder.generateReply(params), "all");
    };

</script>